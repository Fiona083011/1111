package comp1110.mse;

import org.junit.Rule;
import org.junit.Test;
import org.junit.rules.Timeout;

import java.util.Arrays;

import static org.junit.Assert.assertEquals;

public class Q1ThirdTest {
    static final double DELTA = 1e-8;
    @Rule
    public Timeout globalTimeout = Timeout.millis(500);

    private void test(double[] values, double expected) {
        double out = Q1Third.third(values);
        assertEquals("Expected " + expected + " but got " + out + " for values " + Arrays.toString(values), expected, out, DELTA);
    }

    @Test
    public void testNull() {
        test(null,  0);
    }

    @Test
    public void testEmpty() {
        double[] v = {};
        test(v,  0);
    }

    @Test
    public void testSimple() {
        double[] v0 = {0};
        test(v0, 0);
        double[] v1 = {4.0, 1.0, 2.0};
        test(v1, 4.0);
        double[] v2 = {4.0, 1.0, 2.0, 3.0};
        test(v2, 3.5);
        double[] v3 = {4.0, 1.0, 2.0, 3.0, 1.0, 0, 4.0, 0, 3.0, 2.0 };
        test(v3, 3.25);
        double[] v4 = {4.0, 1.0, 2.0, 3.0, 1.0, 3.5, 4.0, 0, 3.0, 2.0 };
        test(v4, 3.25);
        double[] v5 = {4.0, 1.0, 2.0, 3.0, 1.0, 3.5, 4.0, 0, 3.0, 2.0, 1.0, 4.5, 2.5 };
        test(v5, 3.1);
    }

    @Test
    public void medium() {
        double[] v0 = {-4.5, 0.5, -4.5, 0.5, 4.0, -0.5, 8.5, 0.5, -9.0, -7.5, -3.5, -7.5, 6.0, 4.5, -4.0, 8.5, -1.0, -8.5, 4.0, -7.5, 8.5, -6.5};
        test(v0, 1.125);
        double[] v1 = {-0.0, -0.5, -7.0, -4.5, 8.0, 9.0, -8.5, -9.5, 4.5, 2.0, -0.5, 3.0, 8.5, 1.0, -2.5, -0.0, -7.5, -0.5, 0.5, -7.0, 6.0, -10.0};
        test(v1, -1.5);
        double[] v2 = {0.0, -1.5, 8.5, -9.5, -0.0, -3.0, -1.5, -2.5, -6.0, -7.5, -10.5, 3.0, 2.0, -6.5, -4.0, 5.0, 5.5, -10.5, -10.0, 0.5, 3.5, -9.0};
        test(v2, -3.8125);
        double[] v3 = {9.5, -10.0, -10.0, -1.5, 6.5, -5.0, 1.0, -0.0, 7.5, 9.0, 5.5, -3.0, 7.5, -5.5, -7.0, -0.0, 9.5, 7.0, 4.5, -8.5, 9.5, 8.0};
        test(v3, 4.75);
        double[] v4 = {-4.0, 2.5, 3.5, -1.0, -3.0, -7.0, -5.0, -7.5, -9.5, 4.0, 0.5, 3.0, 10.0, -4.5, -9.0, 1.5, -0.0, 6.0, -4.5, 10.5, -5.5, 6.5};
        test(v4, 0.9375);
        double[] v5 = {-0.0, 5.0, 10.5, -0.5, -4.0, 4.5, -5.5, -6.5, -5.0, 6.0, 0.5, -10.5, 5.0, 0.0, 2.5, 10.0, 2.0, 0.5, 2.0, 9.0, 6.0, 5.5};
        test(v5, 2.8125);
        double[] v6 = {-3.0, -6.0, 9.0, 1.5, 0.5, 3.5, 7.0, -5.5, -2.5, 5.0, 3.0, 7.5, -3.0, -2.0, 1.0, 3.5, 9.0, 4.0, 4.0, 1.0, -5.0, 0.0};
        test(v6, 1.875);
        double[] v7 = {7.0, 10.5, -4.0, -4.0, -3.5, -5.0, 3.5, 7.0, 10.5, 1.0, -7.5, 0.5, 2.0, -2.5, -3.0, 0.5, 8.5, 3.5, -9.0, -2.5, 1.0, -7.0};
        test(v7, -0.75);
        double[] v8 = {8.5, 7.5, -10.0, 0.0, 2.0, 5.0, 0.5, 0.0, -9.0, 0.0, 2.0, -6.0, -10.0, 3.0, -9.0, -2.0, -7.5, 8.0, -0.5, -5.0, -3.0, 0.5};
        test(v8, -0.375);
        double[] v9 = {-9.5, -6.0, 6.0, 6.5, 3.0, -6.0, 8.0, 3.0, 2.0, 4.0, -4.5, -4.0, -9.5, 7.0, 3.5, 2.0, -9.5, -4.0, -4.0, 9.5, 6.0, 6.5};
        test(v9, 0.5);
    }

    @Test
    public void longer() {
        double[] v0 = {8.5, 10.5, 12.5, 13.5, 14.5, -20.5, 15.5, 3.0, 8.5, 1.0, -13.0, -16.5, -4.5, 17.5, 20.0, 22.5, 5.5, -20.5, -1.0, -5.0, -24.0, 19.0, -15.5, 21.0, 20.5, -11.0, -1.5, 22.0, -17.5, -5.5, 17.0, 16.5, 1.0, -15.0, -23.5, 15.0, 20.5, -6.0, -6.0, -19.5, -10.0, 8.0, 8.5, -0.0, -11.5, -0.0, 8.0, -11.0, -19.0, 22.5, 13.0};
        test(v0, 6.4411764705882355);
        double[] v1 = {-13.5, 5.0, 5.5, -16.0, 20.0, 5.5, 8.5, 17.5, -24.0, -3.5, 21.5, 15.0, -9.5, -0.0, 3.0, 5.0, 11.0, -3.5, -11.0, 19.5, -10.5, 23.5, -15.0, 0.5, 9.0, -2.0, -11.5, 3.5, -25.0, -18.0, 20.5, -8.5, -24.0, 15.0, 20.5, 22.5, 11.5, -14.5, -19.0, -2.0, -22.0, -3.5, 11.5, -25.0, 18.0, 18.0, 14.5, 10.5, 18.5, 11.0, 17.0};
        test(v1, 5.235294117647059);
        double[] v2 = {-3.5, -5.5, 1.0, -15.0, 8.5, 1.5, -7.5, 12.0, -23.0, 0.5, -12.5, -4.5, -14.0, 19.0, -4.0, 8.5, -2.0, -20.5, 19.5, -21.0, 12.5, 13.0, -12.0, -14.0, -16.5, 7.5, 14.0, 16.5, -21.5, 13.0, 24.5, 7.5, 3.0, -0.0, 24.0, -20.0, 8.0, 24.5, 14.0, 15.0, 17.5, 21.0, -24.0, -21.5, -2.5, -22.0, 15.5, -13.0, 23.0, 14.5, -14.5};
        test(v2, 1.5294117647058822);
        double[] v3 = {-14.5, -3.5, -16.0, 1.5, -1.0, 13.0, 3.0, -22.0, -10.5, -3.0, 10.5, 9.0, -4.0, 6.5, 12.0, -24.5, -11.0, 10.0, 8.5, 20.0, -19.0, -10.0, -21.0, -19.5, 23.5, 16.5, 5.0, -8.5, 11.5, -14.0, 19.5, 3.0, 14.5, 14.5, -23.5, 8.5, -24.0, -15.5, -13.0, 11.5, -18.5, 10.5, -5.5, -6.5, 3.0, -7.5, -25.0, 16.0, 20.5, 4.0, -6.0};
        test(v3, 0.058823529411764705);
        double[] v4 = {18.0, -0.5, -8.5, -8.5, 6.5, 3.5, -11.0, -16.0, 0.5, 19.5, 20.0, 5.5, 4.5, -15.5, -11.5, 9.5, -4.5, -8.0, 19.0, -9.0, 20.0, -19.0, -24.0, 7.0, -13.0, 21.5, 25.0, -14.0, -10.5, 13.0, 21.5, 8.0, 24.5, 17.0, -12.5, 16.0, -14.5, 0.5, -4.0, -13.5, 12.5, 7.0, 6.0, -24.5, 20.0, -5.0, 1.5, -2.5, -13.5, -18.5, 19.5};
        test(v4, 0.17647058823529413);
        double[] v5 = {8.5, -23.0, -3.5, -23.5, -6.5, 0.5, 12.5, -18.5, 21.0, -15.0, 22.5, 21.5, 5.0, 2.5, 17.0, 6.5, 22.0, -15.0, 14.5, 3.5, -5.0, -2.5, 0.0, -4.5, 11.5, -20.5, -25.0, 12.0, 23.0, -12.0, -24.5, -22.0, -21.5, 20.0, -8.5, 8.0, 24.0, -6.0, -18.0, -16.0, -8.5, 7.5, 16.5, -23.5, -2.5, 25.0, 11.0, 24.5, 14.0, -23.5, 16.0};
        test(v5, 5.205882352941177);
        double[] v6 = {24.5, 12.0, 20.0, 13.0, 13.5, -7.0, -25.0, -22.0, 19.0, -22.5, -18.0, -19.5, 5.5, 12.5, 0.0, 0.0, 13.0, 2.5, -18.0, 17.0, -0.5, -7.5, -13.0, 1.5, 14.5, 14.5, 24.5, 16.5, -22.5, -3.5, 16.0, -23.0, 23.0, -23.5, 4.0, 2.5, -12.0, -12.5, -14.0, -22.5, 21.5, 17.5, 21.0, 21.0, -13.5, 21.5, -10.0, 12.0, -6.5, 13.5, 9.0};
        test(v6, -0.29411764705882354);
        double[] v7 = {-6.5, 13.0, 1.0, 22.5, 17.5, 20.5, -18.0, 4.0, -19.0, -24.5, 4.5, -23.5, -24.5, 22.0, -8.5, -9.5, 2.0, -5.5, 5.0, -14.5, -24.5, 15.0, -23.0, 14.0, 15.5, 22.0, 3.0, -9.0, 13.5, -4.5, 8.5, 20.5, -22.5, 23.5, -1.0, 16.5, -11.5, 23.5, 20.0, -6.5, -0.5, 4.5, -7.0, 1.0, -2.0, -23.0, -0.5, 14.0, 1.0, 7.0, -15.5};
        test(v7, -2.8823529411764706);
        double[] v8 = {-8.0, 24.5, 7.0, -5.0, 5.0, 17.5, -10.5, -15.5, 23.5, -16.0, -0.0, 15.5, -21.0, 22.5, -4.0, -18.0, 11.0, -16.0, -11.5, -17.0, 16.5, -20.0, -11.0, 25.0, -22.5, -13.5, -13.0, -3.0, -17.0, 24.5, 1.0, -21.0, 10.0, 9.5, -25.0, -19.0, 20.5, 25.0, 17.5, -19.5, -5.5, 8.5, -5.5, -11.0, -12.5, 15.5, -18.0, -1.5, -14.5, -13.5, 17.5};
        test(v8, -7.5588235294117645);
        double[] v9 = {3.0, 23.0, 5.5, -16.0, -22.5, 0.0, 13.5, 12.0, 2.5, 22.5, 6.0, 21.0, 5.5, -23.5, 12.5, 23.0, -4.5, 5.5, -1.0, 12.0, 7.0, -18.0, -21.5, 15.0, -9.0, -9.0, -1.5, 9.5, -7.5, -19.0, 11.0, -24.0, 1.0, -16.0, 21.0, -11.5, 9.5, -0.5, -23.5, 7.0, -10.5, 20.0, 11.0, -1.5, 22.5, -5.5, -21.0, -20.0, -22.0, 13.5, 6.5};
        test(v9, 1.6470588235294117);
    }
}